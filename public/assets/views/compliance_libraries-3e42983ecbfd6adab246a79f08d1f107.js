window.onload=function(){function e(e){$("<div/>").appendTo(e.detailCell).kendoGrid({dataSource:{transport:{read:{url:"/admin/compliance_libraries/compliance_control_objectives?id="+e.data.id,type:"post",dataType:"json"}},schema:{errors:function(e){return e.errors},data:"data",model:{id:"id",fields:{id:{type:"string"},compliance_id:{type:"string"},name:{type:"string"},is_leaf:{type:"boolean"},parent_id:{type:"integer"},action_name:{type:"string"}}}}},scrollable:!1,sortable:!0,pageable:!0,detailInit:a,columns:[{field:"name",title:"name"},{field:"Add",template:"<a href='/admin/compliance_libraries/new?control_objective_id=${id}'>Add Next control</a>"},{field:"Edit",template:"<a href='/admin/compliance_libraries/${id}/edit'>Edit</a>"},{command:[{name:"Destroy parent",text:"Destroy",click:i}]}]})}function a(e){console.log(e.data.id);$("<div/>").appendTo(e.detailCell).kendoGrid({dataSource:{transport:{read:{url:"/admin/compliance_libraries/compliance_controls?id="+e.data.id,type:"post",dataType:"json"}},schema:{errors:function(e){return e.errors},data:"data",model:{id:"id",fields:{id:{type:"string"},compliance_id:{type:"string"},name:{type:"string"},is_leaf:{type:"boolean"},parent_id:{type:"integer"},action_name:{type:"string"}}}}},scrollable:!1,sortable:!0,pageable:!0,columns:[{field:"name",title:"name"},{field:"Edit",template:"<a href='/admin/compliance_libraries/${id}/edit'>Edit</a>"},{command:[{name:"Destroy child",text:"Destroy",click:t}]}]})}function t(e){var a=this.dataItem(jQuery(e.currentTarget).closest("tr"));confirm("Are you sure you want to delete this record ?")&&$.ajax({url:"/admin/compliance_libraries/"+a.id,type:"delete",dataType:"json",success:function(){}}),$("#grid").data("kendoGrid").dataSource.read(),$("#grid").data("kendoGrid").refresh()}function i(e){var a=this.dataItem(jQuery(e.currentTarget).closest("tr"));confirm("Are you sure you want to delete this record ?")&&$.ajax({url:"/admin/compliance_libraries/"+a.id,type:"delete",dataType:"json",success:function(){}}),$("#grid").data("kendoGrid").dataSource.read(),$("#grid").data("kendoGrid").refresh()}dataSource=new kendo.data.DataSource({transport:{read:{url:"/admin/compliance_libraries/compliance_domains",type:"post",dataType:"json"},destroy:{url:function(e){return"/admin/compliance_libraries/"+e.id},dataType:"json",type:"DELETE"}},schema:{errors:function(e){return e.errors},data:"data",model:{id:"id",fields:{id:{type:"string"},compliance_id:{type:"string"},name:{type:"string"},is_leaf:{type:"boolean"},parent_id:{type:"integer"},action_name:{type:"string"}}}}});$("#grid").kendoGrid({dataSource:dataSource,editable:"inline",height:450,sortable:!0,pageable:!0,detailInit:e,columns:[{field:"name",title:"name"},{field:"Add",template:"<a href='/admin/compliance_libraries/new?compliance_library_id=${id}'>Add Next</a>"},{field:"Edit",template:"<a href='/admin/compliance_libraries/${id}/edit'>Edit</a>"},{command:["destroy"],title:"",width:"160px"}]})};